# ğŸ¨ Visual Architecture Guide

## System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                      (Browser @ localhost:3000)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Avatar Component  â”‚ â”‚  Controls Componentâ”‚
         â”‚  (Visual Feedback)  â”‚ â”‚  (Microphone Btn)  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Main App (page.tsx) â”‚
                    â”‚   State Management    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚               â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Conversation â”‚  â”‚   Call UI    â”‚  â”‚Notification  â”‚
     â”‚   History    â”‚  â”‚ (Teams-like) â”‚  â”‚   Toast      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   API Routes Layer    â”‚
                    â”‚  (Next.js Server)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                      â”‚                      â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚Whisper  â”‚        â”‚   Gemini AI     â”‚    â”‚ OpenAI TTS  â”‚
    â”‚  STT    â”‚        â”‚  (Reasoning)    â”‚    â”‚   (Voice)   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â”‚                      â”‚                      â”‚
    [Audio Blob]          [JSON Response]        [Audio Blob]
         â”‚                      â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Business Logic       â”‚
                    â”‚  (lib/employees.ts)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Employee Directory   â”‚
                    â”‚  (Hard-coded JSON)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: User Says "I want to talk to Rahul"

```
Step 1: CAPTURE AUDIO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User clicks mic   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚Browser  â”‚  MediaRecorder API
    â”‚captures â”‚  captures audio chunks
    â”‚audio    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    [audio.webm blob]


Step 2: SPEECH TO TEXT
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST /api/        â”‚  FormData with audio blob
    â”‚ speech-to-text    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚OpenAI       â”‚  Whisper model
    â”‚Whisper API  â”‚  transcribes to text
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    ["I want to talk to Rahul"]


Step 3: AI REASONING
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST /api/chat  â”‚  {message, history}
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Google Gemini    â”‚  Structured prompt
    â”‚Pro API          â”‚  extracts intent
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    {
      intent: "make_call",
      employee: "Rahul",
      confidence: 0.95
    }


Step 4: BUSINESS LOGIC
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚findEmployeeByName â”‚  Fuzzy matching
    â”‚("Rahul")          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Found: Rahul Kumar â”‚
    â”‚ (emp001)          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚checkAvailability  â”‚  Check schedule
    â”‚(Rahul)            â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    {
      isAvailable: false,
      reason: "Sprint Planning",
      nextAvailable: "10:30"
    }


Step 5: SMART ROUTING
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚getFallbackEmployeeâ”‚  Get manager/teammate
    â”‚(emp001)           â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Found: Anita Sharmaâ”‚
    â”‚ (emp002)          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    {
      response: "Rahul is in Sprint Planning.
                 I'll connect you with Anita instead.",
      employeeId: "emp002",
      canProceedWithCall: true
    }


Step 6: TEXT TO SPEECH
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST /api/           â”‚  {text: "Rahul is..."}
    â”‚ text-to-speech       â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚OpenAI TTS   â”‚  Nova voice @ 0.95x
    â”‚API          â”‚  generates speech
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    [audio.mp3 blob]


Step 7: PLAYBACK & UI
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Browser plays audio  â”‚  AI speaks response
    â”‚Avatar animates      â”‚  Speaking state
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚User confirms        â”‚  "Yes, please"
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Countdown: 5,4,3,2,1 â”‚  Notification shown
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Teams-like Call UI   â”‚  Full screen overlay
    â”‚shows Anita Sharma   â”‚  Mute, End buttons
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component State Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App State (page.tsx)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  conversationState: ConversationState                   â”‚
â”‚    â”œâ”€ idle       (waiting for input)                   â”‚
â”‚    â”œâ”€ listening  (recording audio)                     â”‚
â”‚    â”œâ”€ thinking   (processing with AI)                  â”‚
â”‚    â”œâ”€ speaking   (TTS playing)                         â”‚
â”‚    â””â”€ calling    (call UI active)                      â”‚
â”‚                                                         â”‚
â”‚  messages: Message[]                                    â”‚
â”‚    â””â”€ [{role, content, timestamp}, ...]                â”‚
â”‚                                                         â”‚
â”‚  isCallActive: boolean                                  â”‚
â”‚                                                         â”‚
â”‚  currentEmployee: Employee | null                       â”‚
â”‚                                                         â”‚
â”‚  notification: {message, type} | null                   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
        â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Avatar     â”‚  â”‚   Controls   â”‚  â”‚   CallUI     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ Props:       â”‚  â”‚ Props:       â”‚  â”‚ Props:       â”‚
â”‚ - state      â”‚  â”‚ - isListeningâ”‚  â”‚ - isActive   â”‚
â”‚ - isThinking â”‚  â”‚ - onStart    â”‚  â”‚ - employee   â”‚
â”‚              â”‚  â”‚ - onStop     â”‚  â”‚ - onEndCall  â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ Renders:     â”‚  â”‚ Renders:     â”‚  â”‚ Renders:     â”‚
â”‚ - Circle     â”‚  â”‚ - Mic button â”‚  â”‚ - Full screenâ”‚
â”‚ - Animations â”‚  â”‚ - Status textâ”‚  â”‚ - Avatar     â”‚
â”‚ - Colors     â”‚  â”‚ - Pulse      â”‚  â”‚ - Controls   â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Dependencies

```
page.tsx (Main App)
  â”‚
  â”œâ”€ imports Avatar
  â”œâ”€ imports CallUI
  â”œâ”€ imports Controls
  â”œâ”€ imports ConversationHistory
  â”œâ”€ imports Notification
  â”‚
  â”œâ”€ uses types from types/index.ts
  â”‚   â”œâ”€ ConversationState
  â”‚   â”œâ”€ Message
  â”‚   â””â”€ Employee
  â”‚
  â””â”€ calls API routes
      â”œâ”€ /api/speech-to-text
      â”‚   â””â”€ uses openai (Whisper)
      â”‚
      â”œâ”€ /api/chat
      â”‚   â”œâ”€ uses @google/generative-ai (Gemini)
      â”‚   â””â”€ uses lib/employees.ts
      â”‚       â”œâ”€ findEmployeeByName()
      â”‚       â”œâ”€ checkAvailability()
      â”‚       â””â”€ getFallbackEmployee()
      â”‚
      â””â”€ /api/text-to-speech
          â””â”€ uses openai (TTS)
```

---

## Animation States

```
IDLE State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gray   â”‚  Static circle
â”‚  Circle â”‚  "Ready to help"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


LISTENING State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â— â—¡â—   Pulse rings
â”‚  Blue   â”‚    (   )  expanding
â”‚  Circle â”‚   (     )  outward
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    (       )


THINKING State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Yellow  â”‚  âŸ²  Spinner below
â”‚  Circle â”‚     rotating
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SPEAKING State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â–â–ƒâ–…â–‡â–…â–ƒâ–  Sound waves
â”‚  Green  â”‚     animated bars
â”‚  Circle â”‚     pulsing up/down
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


CALLING State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Full Screen Overlay    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Employee      â”‚    â”‚
â”‚  â”‚   Avatar        â”‚    â”‚  Ringing animation
â”‚  â”‚   + Info        â”‚    â”‚  then connected
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  [Mute] [End] [Video]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Call Sequence Diagram

```
User          Browser         API Routes      External APIs      Database
  â”‚               â”‚                â”‚                â”‚               â”‚
  â”‚ Click Mic     â”‚                â”‚                â”‚               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚                â”‚               â”‚
  â”‚               â”‚ Start Recordingâ”‚                â”‚               â”‚
  â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚               â”‚
  â”‚               â”‚           â”‚    â”‚                â”‚               â”‚
  â”‚ Speak         â”‚           â”‚    â”‚                â”‚               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚               â”‚
  â”‚               â”‚                â”‚                â”‚               â”‚
  â”‚ Stop Mic      â”‚                â”‚                â”‚               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚                â”‚               â”‚
  â”‚               â”‚ POST /api/stt  â”‚                â”‚               â”‚
  â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ POST Whisper   â”‚               â”‚
  â”‚               â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚               â”‚                â”‚ Return text    â”‚               â”‚
  â”‚               â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
  â”‚               â”‚ {text}         â”‚                â”‚               â”‚
  â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚               â”‚
  â”‚               â”‚                â”‚                â”‚               â”‚
  â”‚               â”‚ POST /api/chat â”‚                â”‚               â”‚
  â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Check employeesâ”‚               â”‚
  â”‚               â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚               â”‚                â”‚ Return data    â”‚               â”‚
  â”‚               â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚               â”‚                â”‚                â”‚               â”‚
  â”‚               â”‚                â”‚ POST Gemini    â”‚               â”‚
  â”‚               â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚               â”‚                â”‚ Return intent  â”‚               â”‚
  â”‚               â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
  â”‚               â”‚ {response}     â”‚                â”‚               â”‚
  â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚               â”‚
  â”‚               â”‚                â”‚                â”‚               â”‚
  â”‚               â”‚ POST /api/tts  â”‚                â”‚               â”‚
  â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ POST OpenAI    â”‚               â”‚
  â”‚               â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚               â”‚                â”‚ Return audio   â”‚               â”‚
  â”‚               â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
  â”‚               â”‚ audio blob     â”‚                â”‚               â”‚
  â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚               â”‚
  â”‚               â”‚                â”‚                â”‚               â”‚
  â”‚ Hear Response â”‚ Play Audio     â”‚                â”‚               â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                â”‚               â”‚
  â”‚               â”‚           â”‚    â”‚                â”‚               â”‚
  â”‚               â”‚           â”‚    â”‚                â”‚               â”‚
  â”‚ Countdown     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚               â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚                â”‚               â”‚
  â”‚               â”‚                â”‚                â”‚               â”‚
  â”‚ Call UI       â”‚                â”‚                â”‚               â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚                â”‚               â”‚
  â”‚               â”‚                â”‚                â”‚               â”‚
```

---

## Color Coding Guide

### State Colors
- ğŸ”µ **Blue** - Listening (active input)
- ğŸŸ¡ **Yellow** - Thinking (processing)
- ğŸŸ¢ **Green** - Speaking (output)
- ğŸŸ£ **Purple** - Calling (active call)
- âšª **Gray** - Idle (waiting)

### UI Colors
- ğŸ”´ **Red** - End call, stop recording, errors
- ğŸŸ¦ **Light Blue** - Primary actions
- â¬œ **White** - Background, cards
- â¬› **Dark** - Text, borders

### Status Colors
- âœ… **Green** - Success notifications
- âš ï¸ **Yellow** - Info notifications
- âŒ **Red** - Error notifications
- ğŸ”µ **Blue** - General info

---

## Performance Metrics

### Target Performance
- Time to First Paint: < 1s
- Time to Interactive: < 2s
- Audio Latency: < 500ms
- API Response: < 2s
- Animation Frame Rate: 60fps

### Actual Performance (Development)
- Initial Load: ~1.5s
- STT Processing: ~1-2s
- Gemini Response: ~1-3s
- TTS Generation: ~0.5-1s
- Total Flow: ~5-8s

### Optimization Opportunities
1. Cache employee data
2. Preload TTS for common phrases
3. Optimize bundle size
4. Use service workers for offline
5. Implement request queuing

---

**This visual guide shows how everything connects! ğŸ¨**
